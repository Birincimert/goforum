{{define "content"}}

<!-- Begin Page Content -->

<div class="container-fluid">



    <!-- Page Heading -->

    <h1 class="h3 mb-2 text-gray-800">Yorum Yönetimi</h1>

    <p class="mb-4">Blog yazılarına yapılan tüm yorumları burada yönetebilirsiniz.</p>



    <!-- DataTales Example -->

    <div class="card shadow mb-4">

        <div class="card-header py-3">

            <h6 class="m-0 font-weight-bold text-primary">Yorum Listesi</h6>

        </div>

        <div class="card-body">

            {{if .Alert}}

            <div class="alert alert-{{.Alert.Type}} alert-dismissible fade show" role="alert">

                {{.Alert.Message}}

                <button type="button" class="close" data-dismiss="alert" aria-label="Close">

                    <span aria-hidden="true">&times;</span>

                </button>

            </div>

            {{end}}

            <div class="table-responsive">

                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">

                    <thead>

                    <tr>

                        <th>ID</th>

                        <th>Yazar</th>

                        <th>İçerik</th>

                        <th>Yazı ID</th>

                        <th>Tarih</th>

                        <th>İşlemler</th>

                    </tr>

                    </thead>

                    <tbody>

                    {{range .Comments}}

                    <tr>

                        <td>{{.ID}}</td>

                        <td>{{.Name}}</td>

                        <td>{{.Content}}</td>

                        <td>{{.PostID}}</td>

                        <td>{{.CreatedAt.Format "02-01-2006 15:04"}}</td>

                        <td>

                            <a href="javascript:void(0)" class="btn btn-danger btn-circle btn-sm delete-comment" data-id="{{.ID}}">

                                <i class="fas fa-trash"></i>

                            </a>

                        </td>

                    </tr>

                    {{end}}

                    </tbody>

                </table>

            </div>

        </div>

    </div>



</div>

<!-- /.container-fluid -->



<!-- Delete Confirmation Modal -->

<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">

    <div class="modal-dialog" role="document">

        <div class="modal-content">

            <div class="modal-header">

                <h5 class="modal-title" id="deleteModalLabel">Yorumu Sil</h5>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">

                    <span aria-hidden="true">&times;</span>

                </button>

            </div>

            <div class="modal-body">

                Bu yorumu silmek istediğinizden emin misiniz?

            </div>

            <div class="modal-footer">

                <button type="button" class="btn btn-secondary" data-dismiss="modal">İptal</button>

                <button type="button" class="btn btn-danger" id="confirmDelete">Sil</button>

            </div>

        </div>

    </div>

</div>



<script>

    $(document).ready(function() {

        var table = $('#dataTable').DataTable({

            "language": {

                "url": "//cdn.datatables.net/plug-ins/1.10.24/i18n/Turkish.json"

            }

        });



        var commentIdToDelete = null;



        $('.delete-comment').click(function() {

            commentIdToDelete = $(this).data('id');

            $('#deleteModal').modal('show');

        });



        $('#confirmDelete').click(function() {

            if (commentIdToDelete) {

                window.location.href = '/admin/comments/delete/' + commentIdToDelete;

            }

        });

    });

</script>

{{end}}