{{ define "content" }}
<!-- Modern Profile Page -->
<div class="profile-container">
    <div class="profile-header">
        <div class="profile-avatar">{{ slice .CurrentUser.Username 0 1 }}</div>
        <h1 class="profile-name">{{ .CurrentUser.FirstName }} {{ .CurrentUser.LastName }}</h1>
        <p class="profile-username">@{{ .CurrentUser.Username }}</p>

        <div class="profile-actions-top">
            <a href="/profile/new-post" class="btn-primary">
                <i class="fas fa-pen"></i>
                <span>Bir Forum Yaz</span>
            </a>
            <a href="/site/logout" class="btn-outline">
                <i class="fas fa-sign-out-alt"></i>
                <span>Çıkış Yap</span>
            </a>
        </div>
    </div>

    <div class="profile-content">
        <div class="profile-card">
            <div class="card-header">
                <h3>Hesap Bilgileri</h3>
            </div>
            <div class="card-body grid-2">
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-user"></i> Ad Soyad</div>
                    <div class="info-value">{{ .CurrentUser.FirstName }} {{ .CurrentUser.LastName }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-at"></i> Kullanıcı Adı</div>
                    <div class="info-value">{{ .CurrentUser.Username }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-envelope"></i> E-posta</div>
                    <div class="info-value">{{ .CurrentUser.Email }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-calendar"></i> Üyelik Tarihi</div>
                    <div class="info-value">{{ .CurrentUser.CreatedAt.Format "02.01.2006" }}</div>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="posts"><i class="fas fa-newspaper"></i> Yazılarım ({{ len .MyPosts }})</button>
            <button class="tab-btn" data-tab="comments"><i class="fas fa-comment"></i> Yorumlarım ({{ len .MyComments }})</button>
            <button class="tab-btn" data-tab="likes"><i class="fas fa-heart"></i> Beğendiklerim ({{ len .LikedComments }})</button>
        </div>

        <div class="tab-content active" id="tab-posts">
          {{ range .MyPosts }}
            <div class="list-item">
              <div class="list-left">
                {{ if not .IsApproved }}<span class="badge-pending" title="Onay bekliyor"><i class="fas fa-clock"></i></span>{{ end }}
                <a class="list-title" href="/post/{{ .Slug }}">{{ .Title }}</a>
                <div class="list-sub">{{ .Description }}</div>
              </div>
              <div class="list-right actions">
                <span class="list-date">{{ .CreatedAt.Format "02.01.2006 15:04" }}</span>
                <a class="btn-edit" href="/profile/post/edit/{{ .ID }}" title="Düzenle"><i class="fas fa-pen"></i></a>
                <a class="btn-del" href="/profile/post/delete/{{ .ID }}" onclick="return confirm('Bu yazıyı ve tüm yorumlarını silmek istediğinize emin misiniz?');" title="Sil"><i class="fas fa-trash"></i></a>
              </div>
            </div>
          {{ else }}
            <div class="empty">Henüz yazınız yok. İlk yazınızı oluşturmak için yukarıdan “Bir Forum Yaz” butonuna tıklayın.</div>
          {{ end }}
        </div>

        <div class="tab-content" id="tab-comments">
          {{ range .MyComments }}
            <div class="list-item">
              <div class="list-left">
                <div class="list-title">{{ .Content }}</div>
                <div class="list-sub">Yazı #{{ .PostID }} — {{ .CreatedAt.Format "02.01.2006 15:04" }}</div>
              </div>
            </div>
          {{ else }}
            <div class="empty">Henüz yorum yapmamışsınız.</div>
          {{ end }}
        </div>

        <div class="tab-content" id="tab-likes">
          {{ range .LikedComments }}
            <div class="list-item">
              <div class="list-left">
                <div class="list-title">{{ .Content }}</div>
                <div class="list-sub">Yazı #{{ .PostID }} — {{ .CreatedAt.Format "02.01.2006 15:04" }}</div>
              </div>
            </div>
          {{ else }}
            <div class="empty">Beğendiğiniz yorum bulunmuyor.</div>
          {{ end }}
        </div>
    </div>
</div>

<style>
.profile-container{min-height:100vh;background:linear-gradient(180deg,#0f2a44 0%,#f5fbff 100%);padding:32px 16px}
.profile-header{text-align:center;margin-bottom:24px}
.profile-avatar{width:88px;height:88px;border-radius:50%;background:#103450;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:40px;margin:32px auto 12px;border:3px solid #fff;box-shadow:0 6px 16px rgba(0,0,0,.2)}
.profile-name{color:#fff;margin:0 0 6px 0;font-weight:700}
.profile-username{color:rgba(255,255,255,.85);margin:0}
.profile-actions-top{display:flex;gap:12px;justify-content:center;margin-top:12px}
.btn-primary,.btn-outline{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:10px;text-decoration:none;font-weight:600}
.btn-primary{background:#0d3a66;color:#fff}
.btn-primary:hover{background:#0a2f52}
.btn-outline{background:#fff;color:#0d3a66;border:1px solid #cfe2f3}
.btn-outline:hover{background:#f5f9ff}
.profile-content{max-width:860px;margin:0 auto}
.profile-card{background:#fff;border-radius:16px;box-shadow:0 10px 26px rgba(0,0,0,.08);overflow:hidden;margin-bottom:20px}
.card-header{background:linear-gradient(135deg,#0d3a66,#589dcf);color:#fff;padding:16px 20px}
.card-body{padding:20px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.info-item{background:#f8fbff;border:1px solid #e8f0f7;border-radius:10px;padding:12px}
.info-label{color:#375a7f;font-weight:600;margin-bottom:6px}
.info-value{color:#234}
.tabs{display:flex;gap:10px;margin:10px 0 14px}
.tab-btn{padding:8px 12px;border-radius:10px;border:1px solid #dbe7f3;background:#fff;color:#134;cursor:pointer;font-weight:600}
.tab-btn.active{background:#0d3a66;color:#fff;border-color:#0d3a66}
.tab-content{display:none}
.tab-content.active{display:block}
.list-item{display:flex;align-items:center;justify-content:space-between;gap:12px;background:#fff;border:1px solid #e7eff7;border-radius:12px;padding:12px 14px;margin-bottom:10px;text-decoration:none;color:inherit}
.list-title{font-weight:700;color:#102a43;text-decoration:none}
.list-title:hover{text-decoration:underline}
.actions{display:flex;align-items:center;gap:10px}
.btn-del{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px;border:1px solid #f1c9c9;background:#fff;color:#b11;}
.btn-del:hover{background:#ffecec;border-color:#f3b7b7}
.btn-edit{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px;border:1px solid #cfe2f3;background:#fff;color:#0d3a66}
.btn-edit:hover{background:#eef6ff;border-color:#b8d5ef}
.list-date{color:#678;white-space:nowrap;font-size:.9rem}
.empty{background:#fff;border:1px dashed #bdd3e6;color:#456;border-radius:12px;padding:16px;text-align:center}
.badge-pending{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:50%;background:#ffefc2;color:#8a6d00;border:1px solid #f6d98b;margin-right:8px}
@media(max-width:768px){.grid-2{grid-template-columns:1fr}.profile-actions-top{flex-direction:column}.list-item{flex-direction:column;align-items:flex-start}.actions{align-self:flex-end}.list-right{display:flex;gap:8px}}
</style>
<script>
  (function(){
    const btns=document.querySelectorAll('.tab-btn');
    const tabs={posts:document.getElementById('tab-posts'),comments:document.getElementById('tab-comments'),likes:document.getElementById('tab-likes')};
    btns.forEach(b=>b.addEventListener('click',()=>{
      btns.forEach(x=>x.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
      b.classList.add('active');
      const key=b.getAttribute('data-tab');
      if(tabs[key]) tabs[key].classList.add('active');
    }));
  })();
</script>
{{ end }}
